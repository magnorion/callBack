!function(a){function b(b,c){var d=(c.largura,a(document).width()),e=d/50/2-5;console.log(e);var f="#fff";if(""!=c.imagem&&(f="url("+c.imagem+")"),b.css({width:c.largura,"min-height":c.altura,background:f,"background-size":"cover",margin:"5% auto",left:"0%",transform:"rotateZ(0deg)"}),b.find("#callBack_Body").append(c.texto),""!=c.campos&&"undefined"!=typeof c.campos){var g=c.campos.split(" "),h="",i=b.find("#callBack_form");i.append("<p id='data-id'> "+c.id+" </p>"),a.each(g,function(a,b){var c=b.split(";"),d=c[0],e=c[1];h="Telefone"==e||"telefone"==e?"<p class='telefone'><label>"+d+" <small> Com DDD</small>:</label><input type='text' name='"+d+"' class='tel-masked' /></p>":"Mensagem"==e||"Mensagem"==e?"<p><label>"+d+":</label><textarea name='"+d+"' class='field-required' ></textarea></p>":"Email"==e||"email"==e?"<p><label>"+d+":</label><input type='text' name='"+d+"' id='email' class='field-required email-masked' /></p><p><label>Confirmar e-mail:</label><input type='text' name='confirmacao' id='confirmar' class='field-required email-masked' /></p><div id='repita'></div>":"Nome"==e||"nome"==e?"<p><label>Nome Completo:</label><input type='text' name='"+d+"' class='field-required' /></p>":"<p><label>"+d+":</label><input type='text' name='"+d+"' class='field-required' /></p>",i.append(h)}),h="<p><button>Enviar Dados</button></p>",i.append(h)}}function c(b,c,d){if(""!=c.cookie&&"-1"!=document.cookie.indexOf(c.cookie))return!1;if("by_instant"==c.chamada)d.css("display","block"),b.addClass("show"),document.cookie=c.cookie+"=set;expires=Thu, 01 Jan 2017 00:00:00 GMT";else if("by_time"==c.chamada){var e=1e3*c.tempo;setTimeout(function(){d.css("display","block"),b.addClass("show"),document.cookie=c.cookie+"=set;expires=Thu, 01 Jan 2017 00:00:00 GMT"},e)}else"by_out"==c.chamada&&a(document).on("mouseleave",function(){b.hasClass("show")||(d.css("display","block"),setTimeout(function(){b.css("transform","rotateZ(-20deg)")},100),setTimeout(function(){b.css("transform","rotateZ(20deg)")},400),setTimeout(function(){b.css("transform","rotateZ(0deg)")},800),b.addClass("show"),document.cookie=c.cookie+"=set;expires=Thu, 01 Jan 2017 00:00:00 GMT")})}a(document).ready(function(){var d,e=a("#callBack_overlay"),f=a("#callBack_window"),g=a("#callBack_close"),h=window.location.pathname;a.ajax({url:ajaxurl,method:"GET",data:{action:"getmodal",pagina:h}}).done(function(a){a=JSON.parse(a),d=a,b(f,a),c(f,a,e)}),g.live("click",function(){e.remove()}),a("#callBack_window").find("form button").live("click",function(b){b.preventDefault();var c=[],d=a("#callBack_window").find("form");d.find("p .field-required").each(function(){var b=a(this);if(""==b.val())return b.addClass("input-modal-error").focus,!1;if(b.hasClass("email-masked")){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!e.test(b.val()))return b.addClass("input-modal-error").focus,!1;b.removeClass("input-modal-error");var f=b.attr("name"),g=b.val();if(c.push(f+":"+g),"confirmacao"==b.prop("name")){var h=d.find("#email").val();if(b.val()!=h)return b.addClass("input-modal-error").focus,!1;b.removeClass("input-modal-error");var f=b.attr("name"),g=b.val();c.push(f+":"+g)}}else{b.removeClass("input-modal-error");var f=b.attr("name"),g=b.val();c.push(f+":"+g)}});var e=d.find("p.telefone");if(c.push("Telefone:"+e.find("input[type='text']").val()),a(".input-modal-error").length>0)return!1;var f=a("#data-id").text();a.ajax({url:ajaxurl,method:"POST",data:{action:"modal_envia_dados_form",dados:c,id:f}}).done(function(b){var c=JSON.parse(b),d="";"Dados enviados!"==c.msg?(d="Agradecemos o seu interesse e em breve um de nossos consultores educacionais entrar√° em contato!",alert(d),a("#callBack_close").trigger("click")):(d="Houve um erro!",alert(d),console.log(c))})})})}(jQuery);