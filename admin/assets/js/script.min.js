!function(a){a(document).ready(function(){a("#all_modals").length>0&&(a("#all_modals").DataTable({language:{lengthMenu:"Mostrando _MENU_ modais por página",zeroRecords:"Nenhum modal encontrado!",info:"Mostrando _PAGE_ de _PAGES_",infoEmpty:"Nenhum modal encontrado!",loadingRecords:"Carregando...",processing:"Processando...",search:"Buscar:",paginate:{first:"Primeiro",last:"Último",next:"Próximo",previous:"Anterior"},infoFiltered:"(Filtrado _MAX_)"}}),a(".remove-modal").on("click",function(){var b=a(this).data("remove"),c=confirm("Deseja remover este modal?"),d=a(this).parents("tr");c&&a.ajax({url:ajaxurl,method:"POST",data:{action:"remove_modal",dado:b}}).done(function(a){var b=JSON.parse(a);"Modal removido!"==b.msg?d.animate({opacity:0},500,function(){d.remove()}):console.log(b)})}),a(".catch-modal").on("click",function(b){b.preventDefault();var c=a(this),d=c.data("catch");a.ajax({url:ajaxurl,method:"GET",data:{action:"catch_leads_modal",dados:d}}).done(function(a){var b=JSON.parse(a);if("Este modal não possui leads!"!=b.msg){var c=b.msg;window.location.assign(c)}else alert(b.msg)})})),a("#callBack_admin_body").length>0&&(CKEDITOR.replace("editor"),a(".date-picker").datepicker({dateFormat:"dd/mm/yy"}),a("input[name='imagem']").val(""),a("#get_image").on("click",function(b){b.preventDefault(),file_frame=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader_title"),button:{text:a(this).data("uploader_button_text")},multiple:!1}),file_frame.on("select",function(){attachment=file_frame.state().get("selection").first().toJSON(),a("input[name='imagem']").val("").val(attachment.url)}),file_frame.open()}),a(".body-left p select").on("change",function(){var b=a(this).val();"Sim"==b?a("#captacao_build").css({display:"block"}).animate({opacity:1},400):a("#captacao_build").animate({opacity:0},400,function(){a("#captacao_build").css({display:"none"})})}),a("#new_input").on("click",function(b){b.preventDefault();a("div.ui-dialog.ui-widget.ui-widget-content.ui-corner-all.ui-front.ui-draggable.ui-resizable");a("#dialog-form").dialog({height:300,width:350,modal:!0,overlay:{backgroundColor:"#000",opacity:.7},resizable:!1,close:function(){}})}),a("#new_field_send").on("click",function(b){b.preventDefault();var c=a("#new_field_form");if(c.find("input[type='text'],select").each(function(){""==a(this).val()?a(this).addClass("input-error-modal").focus():a(this).removeClass("input-error-modal")}),a(".input-error-modal").length>0)return!1;var d={nome:c.find("input[name='name']").val(),tipo:c.find("select").val()};a("#captacao_build table").append("<tr class='field-row'><td class='nome'>"+d.nome+"</td> <td class='tipo'>"+d.tipo+"</td><td class='remove'> <span><i class='fa fa-trash'></i> Remover Campo</span> </td></tr>"),a("#dialog-form").dialog("close")}),a("#captacao_build table").on("click","tr td.remove span",function(){var b=a(this);b.parents("tr").animate({opacity:0},1e3,function(){b.parents("tr").remove()})}),a("select[name='chamada']").on("change",function(){var b=a(this).val();a("#input_time input").val(""),"by_time"==b?a("#input_time").css("display","block").animate({opacity:1},1e3):a("#input_time").css({display:"none",opacity:0})}),a("#send_data").on("click",function(b){if(b.preventDefault(),a("#create_modal_form").find(".required").each(function(){var b=a(this);""==b.val()?b.addClass("input-error"):b.removeClass("input-error")}),a("#create_modal_form").find(".input-error").length>0)return!1;var c=[];a("table.input_adds").find(".field-row").each(function(){var b=a(this),d=b.find("td.nome").text(),e=b.find("td.tipo").text();c.push(d+";"+e)});var d={tipo_modal:a("select[name='tipo_modal']").val(),nome:a("input[name='nome']").val(),cookie:a("input[name='cookie']").val(),inicio:a("input[name='inicio']").val(),saida:a("input[name='saida']").val(),largura:a("input[name='largura']").val(),altura:a("input[name='altura']").val(),imagem:a("input[name='imagem']").val(),campos:c,youtube:a("input[name='youtube']").val(),texto:CKEDITOR.instances.editor.getData(),chamada:a("select[name='chamada']").val(),tempo:a("input[name='tempo']").val()};a.ajax({url:ajaxurl,method:"POST",data:{action:"create_modal",dados:d}}).success(function(a){var b=JSON.parse(a);if("Dados enviados!"==b.msg){alert("Modal Criado!");var c=window.location.href.split("?")[0]+"?page=CallBack/admin/index.php";window.location.assign(c)}else alert("Desculpe, houve algum erro!"),console.log(b.msg)})}))})}(jQuery);